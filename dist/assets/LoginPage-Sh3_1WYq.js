import{A as y,B as g,r as s,j as e,V as w}from"./index-Bbg6LhZG.js";import{a as v}from"./axios-BExlCEfR.js";function T(){const o=y(),{setUser:r,setToken:n}=g(),[c,h]=s.useState(""),[u,m]=s.useState(""),[d,f]=s.useState(""),[b,j]=s.useState(!1),[a,l]=s.useState(!1),p=async t=>{t.preventDefault(),l(!0),n("asdfasdfsadfsdf"),r({id:"michael",username:"Michael",totpEnabled:!0}),o("/chat")},x=async t=>{t.preventDefault(),l(!0);try{const i=await v.post("/api/v1/auth/verify-totp",{username:c,totp_code:d});n(i.data.token),r(i.data.user),o("/chat")}catch{w.error("Invalid TOTP code")}finally{l(!1)}};return e.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 w-full h-full z-0",children:[e.jsx("div",{className:"hidden sm:block w-full h-full bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(/src/assets/bg_desktop.png)"}}),e.jsx("div",{className:"block sm:hidden w-full h-full bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(/src/assets/bg_mobile.png)"}})]}),e.jsx("div",{className:"mythic-watermark z-10"}),e.jsxs("div",{className:"max-w-md w-full border border-mythicGold shadow-mythic-glow bg-black/60 p-8 flex flex-col gap-8 z-20 relative",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-center text-3xl mythic-heading text-mythicGold mb-2",children:"Sign in to your account"})}),b?e.jsxs("form",{className:"space-y-6",onSubmit:x,children:[e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"totp",className:"mythic-heading text-mythicGold text-base mb-1 block",children:"TOTP Code"}),e.jsx("input",{id:"totp",name:"totp",type:"text",required:!0,className:"mythic-input w-full px-4 py-2 border border-mythicGold bg-black/40 text-white font-serif focus:outline-none focus:ring-2 focus:ring-mythicGold placeholder:text-mythicGold",placeholder:"Enter TOTP code",value:d,onChange:t=>f(t.target.value)})]})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:a,className:"mythic-btn w-full flex justify-center py-2 px-4 border border-mythicGold text-white bg-mythicGold font-serif mythic-heading focus:outline-none focus:ring-2 focus:ring-mythicGold transition-all duration-150 disabled:opacity-60 disabled:cursor-not-allowed",children:a?"Verifying...":"Verify TOTP"})})]}):e.jsxs("form",{className:"space-y-6",onSubmit:p,children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"mythic-heading text-mythicGold text-base mb-1 block",children:"Username"}),e.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"mythic-input w-full px-4 py-2 border border-mythicGold bg-black/40 text-white font-serif focus:outline-none focus:ring-2 focus:ring-mythicGold placeholder:text-mythicGold",placeholder:"Username",value:c,onChange:t=>h(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"mythic-heading text-mythicGold text-base mb-1 block",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"mythic-input w-full px-4 py-2 border border-mythicGold bg-black/40 text-white font-serif focus:outline-none focus:ring-2 focus:ring-mythicGold placeholder:text-mythicGold",placeholder:"Password",value:u,onChange:t=>m(t.target.value)})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:a,className:"mythic-btn w-full flex justify-center py-2 px-4 border border-mythicGold text-white bg-mythicGold font-serif mythic-heading focus:outline-none focus:ring-2 focus:ring-mythicGold transition-all duration-150 disabled:opacity-60 disabled:cursor-not-allowed",children:a?"Signing in...":"Sign in"})})]})]})]})}export{T as LoginPage};
